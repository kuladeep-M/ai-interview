<div class="hr-dashboard-container" *ngIf="interviews() && interviews().length > 0">
  <aside class="sidebar">
    <img src="assets/intelliview-logo.png" alt="IntelliView Logo" style="height:64px;max-width:320px;object-fit:contain;" />
    <h2>HR Dashboard</h2>
    <nav>
      <ul>
        <li class="active"><span class="icon-analytics"></span> Interview Analytics</li>
        <li><span class="icon-candidates"></span> Candidates</li>
        <li><span class="icon-positions"></span> Positions</li>
        <li><span class="icon-settings"></span> Settings</li>
      </ul>
    </nav>
  </aside>

  <section class="main-panel">
    <div class="recent-interviews">
      <h3>Recent Interviews</h3>
      <span class="subtitle">{{ interviews().length }} interviews today</span>
      <ul class="interview-list">
        <li *ngFor="let interview of interviews(); let i = index" class="interview-card"
          [class.selected]="selectedInterview() && interview.id === selectedInterview()?.id"
          (click)="selectedInterview.set(interview)">
          <div class="avatar" [ngStyle]="getAvatarStyle(interview.name)">{{ getInitial(interview.name) }}</div>
          <div class="details">
            <div class="name">{{ interview.name }}</div>
            <div class="role">{{ interview.role }}</div>
            <div class="score" [ngClass]="{
              'success': interview.score >= 80,
              'warning': interview.score >= 55 && interview.score < 80,
              'danger': interview.score < 55
            }">{{ interview.score }}%</div>
            <div class="time">{{ interview.interviewTime }}</div>
          </div>
        </li>
      </ul>
    </div>

    <div class="interview-details" *ngIf="selectedInterview">
      <div class="profile-header">
        <div class="avatar large" [ngStyle]="getAvatarStyle(selectedInterview.name)" style="font-size:2rem;">{{
          getInitial(selectedInterview.name) }}</div>
        <div class="profile-info">
          <div class="name">{{ selectedInterview()?.name }}</div>
          <div class="role">{{ selectedInterview()?.role }}</div>
          <div class="meta">Interview: {{ selectedInterview()?.interviewTime }}</div>
        </div>
        <div class="fit-score">
          <span class="label">AI Fit Score</span>
          <div class="score success">{{ selectedInterview()?.score }}%</div>
        </div>
      </div>
      <div class="stats-row">
        <div class="stat"><span>{{ selectedInterview()?.duration }}</span>
          <div>Duration</div>
        </div>
       
        <div class="stat"><span>{{ selectedInterview()?.confidenceLevel }}</span>
          <div>Confidence Level</div>
        </div>
        <div class="stat"><span>{{ selectedInterview()?.domainScore }}</span>
          <div>Domain Score</div>
        </div>
      </div>
      <div class="overall-summary">
        <h4>Overall Summary</h4>
        <p>{{ selectedInterview()?.overallSummary }}</p>
      </div>
       <div class="recommendation" *ngIf="selectedInterview()?.recommendation">
        <h4>AI Recommendation</h4>
        <div><strong>Decision:</strong> {{ selectedInterview()?.recommendation?.overall_decision }}</div>
        <div><strong>Reason:</strong> {{ selectedInterview()?.recommendation?.reason }}</div>
      </div>
      <div class="domain-scores" *ngIf="selectedInterview()?.domainSkills">
        <h4>Domain Level Scores</h4>
        <ul>
          <li *ngFor="let skill of selectedInterview()?.domainSkills">
            <strong>{{ skill.skill }}:</strong><span *ngIf="skill.remarks"> {{ skill.remarks }}</span> <span style="margin-left:auto;font-weight:600;color:#5d5cff;width:70px;">{{ skill.score }} / 10</span>
          </li>
        </ul>
      </div>
      <div class="improvements" *ngIf="selectedInterview()?.improvementSuggestions?.length">
        <h4>Improvement Suggestions</h4>
        <ul>
          <li *ngFor="let suggestion of selectedInterview()?.improvementSuggestions">{{ suggestion }}</li>
        </ul>
      </div>
      <div class="generic-skills" *ngIf="selectedInterview()?.genericSkills?.length">
        <h4>Generic Skills</h4>
        <ul>
          <li *ngFor="let skill of selectedInterview()?.genericSkills">
            <strong>{{ skill.skill }}:</strong><span *ngIf="skill.remarks"> {{ skill.remarks }}</span> <span style="margin-left:auto;font-weight:600;color:#5d5cff;width:100px;">{{ skill.score }} / 10</span>
          </li>
        </ul>
      </div>
    </div>
  </section>
</div>